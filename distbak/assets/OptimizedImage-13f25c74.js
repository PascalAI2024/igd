import{j as e}from"./components-core-b207544e.js";import{r}from"./react-vendor-e69ed448.js";import{az as t}from"./ui-vendor-2ad7b968.js";const a=({src:a,alt:o,className:s="",width:n,height:l,fallbackIcon:i=e.jsx(t,{className:"w-8 h-8 text-red-500/70"}),fallbackClassName:c="flex items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800",onLoad:u,onError:m,priority:g=!1,objectFit:d="cover"})=>{const[f,h]=r.useState(!0),[$,y]=r.useState(!1),[j,p]=r.useState(null),x=r.useRef(null),b=r.useRef(0);return r.useEffect((()=>{h(!0),y(!1),b.current=0;const e=()=>{const r=new Image,t=a.includes("?")?a:`${a}?t=${Date.now()}`;r.src=t,g&&(r.fetchPriority="high"),r.onload=()=>{p(a),h(!1),null==u||u()},r.onerror=()=>{b.current<2?(b.current+=1,setTimeout(e,1e3)):(h(!1),y(!0),null==m||m())}};return e(),()=>{x.current&&(x.current.onload=null,x.current.onerror=null)}}),[a,u,m,g]),$?e.jsx("div",{className:`${c} ${s}`,style:{width:n?`${n}px`:"100%",height:l?`${l}px`:"100%"},role:"img","aria-label":`${o} (image failed to load)`,children:i}):f?e.jsx("div",{className:`animate-pulse bg-gradient-to-br from-gray-800 to-gray-900 ${s}`,style:{width:n?`${n}px`:"100%",height:l?`${l}px`:"100%"},role:"img","aria-label":`Loading ${o}`}):e.jsx("img",{ref:x,src:j||"",alt:o,className:s,width:n,height:l,loading:g?"eager":"lazy",style:{objectFit:d},onError:e=>{if(b.current<2){b.current+=1;const r=e.target,t=`${a}?retry=${b.current}&t=${Date.now()}`;r.src=t}else y(!0),null==m||m()}})};export{a as O};
